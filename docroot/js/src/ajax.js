var myNamespace = myNamespace || {};

var debuga = false;// debug flag

myNamespace.ajax = (function($) {
	"use strict";

	function getLayersFromNetCDFFile(useOpendap, opendapDataURL) {
		AUI().use('aui-io-request', function(A) {
			if (debuga) {
				console.log("Started getLayersFromNetCDFFile");
			}
			var url = ajaxCallResourceURL;
			var data = {};
			data[portletNameSpace + 'requestType'] = "getLayersFromNetCDFFile";
			if (useOpendap)
				data[portletNameSpace + 'opendapDataURL'] = opendapDataURL;

			A.io.request(url, {
				// data to be sent to server
				data : data,
				dataType : 'json',

				on : {
					failure : function() {
					},

					success : function(event, id, obj) {
						var instance = this;

						// JSON Data coming back from Server
						var responseData = instance.get('responseData');
						myNamespace.control.viewParameterNames(responseData);
					}
				}
			});
		});
	}

	function getDatavaluesFromRaster(dataRequest, data) {
		AUI().use('aui-io-request', function(A) {
			if (debuga) {
				console.log("Started getDatavaluesFromRaster");
				console.log(JSON.stringify(dataRequest));
			}
			var url = ajaxCallResourceURL;
			// var data = {};
			// data[portletNameSpace + 'param1'] = 'hello1';
			// dataRequest[portletNameSpace + 'requestType'] =
			// 'getDatavaluesFromRaster';

			A.io.request(url, {
				// data to be sent to server
				data : dataRequest,
				dataType : 'json',

				on : {
					failure : function() {
						alert("SOMETHING WENT WRONG!");
					},

					success : function(event, id, obj) {
						var instance = this;

						// JSON Data coming back from Server
						var responseData = instance.get('responseData');
						myNamespace.matchup.compareData(responseData, data);

					}

				}
			});
		});
	}

	function getDimension(rasterParameter) {
		AUI().use('aui-io-request', function(A) {
			if (debuga) {
				console.log("Started getDimension");
			}
			var url = ajaxCallResourceURL;
			var data = {};
			data[portletNameSpace + 'rasterParameter'] = rasterParameter;
			data[portletNameSpace + 'requestType'] = 'getMetaDimensions';

			A.io.request(url, {
				// data to be sent to server
				data : data,
				dataType : 'json',

				on : {
					failure : function() {
						alert("SOMETHING WENT WRONG!");
					},

					success : function(event, id, obj) {
						var instance = this;

						// JSON Data coming back from Server
						var responseData = instance.get('responseData');
						myNamespace.matchup.setUpParameterMetaSelector(responseData);

					}

				}
			});
		});
	}

	function getLonghurstPolygon(region) {
		if (!window.polygon)
			window.polygon = {};
		// AUI().use('aui-io-request', function(A) {
		if (debuga) {
			console.log("Started getDimension");
		}
		var url = ajaxCallResourceURL;
		var data = {};
		data[portletNameSpace + 'longhurstRegion'] = region;
		data[portletNameSpace + 'requestType'] = 'getLonghurstPolygon';

		// A.io.request(url, {
		$.ajax({
			url : url,
			// data to be sent to server
			data : data,
			dataType : 'json',
			async : false,

			// on : {
			error : function() {
				alert("SOMETHING WENT WRONG!");
			},

			success : function(result, status, xhr) {
				// var instance = this;

				// var responseData = instance.get('responseData');
				// console.log("result:");
				// console.log(result[region]);
				window.polygon[region] = result[region];// .slice(1,result[region].length-1);
			}

		// }
		});
		// });
	}

	function createNetCDF() {
		var url = ajaxCallResourceURL;
		var data = {};
		data[portletNameSpace + 'requestType'] = 'createNetCDF';
		data[portletNameSpace + 'allLat'] = [ -89.5, -88.5, -87.5, -86.5, -85.5, -84.5, -83.5, -82.5, -81.5, -80.5,
				-79.5, -78.5, -77.5, -76.5, -75.5, -74.5, -73.5, -72.5, -71.5, -70.5, -69.5, -68.5, -67.5, -66.5,
				-65.5, -64.5, -63.5, -62.5, -61.5, -60.5, -59.5, -58.5, -57.5, -56.5, -55.5, -54.5, -53.5, -52.5,
				-51.5, -50.5, -49.5, -48.5, -47.5, -46.5, -45.5, -44.5, -43.5, -42.5, -41.5, -40.5, -39.5, -38.5,
				-37.5, -36.5, -35.5, -34.5, -33.5, -32.5, -31.5, -30.5, -29.5, -28.5, -27.5, -26.5, -25.5, -24.5,
				-23.5, -22.5, -21.5, -20.5, -19.5, -18.5, -17.5, -16.5, -15.5, -14.5, -13.5, -12.5, -11.5, -10.5, -9.5,
				-8.5, -7.5, -6.5, -5.5, -4.5, -3.5, -2.5, -1.5, -0.5, 0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5,
				10.5, 11.5, 12.5, 13.5, 14.5, 15.5, 16.5, 17.5, 18.5, 19.5, 20.5, 21.5, 22.5, 23.5, 24.5, 25.5, 26.5,
				27.5, 28.5, 29.5, 30.5, 31.5, 32.5, 33.5, 34.5, 35.5, 36.5, 37.5, 38.5, 39.5, 40.5, 41.5, 42.5, 43.5,
				44.5, 45.5, 46.5, 47.5, 48.5, 49.5, 50.5, 51.5, 52.5, 53.5, 54.5, 55.5, 56.5, 57.5, 58.5, 59.5, 60.5,
				61.5, 62.5, 63.5, 64.5, 65.5, 66.5, 67.5, 68.5, 69.5, 70.5, 71.5, 72.5, 73.5, 74.5, 75.5, 76.5, 77.5,
				78.5, 79.5, 80.5, 81.5, 82.5, 83.5, 84.5, 85.5, 86.5, 87.5, 88.5, 89.5 ];
		data[portletNameSpace + 'allLon'] = [ -179.5, -178.5, -177.5, -176.5, -175.5, -174.5, -173.5, -172.5, -171.5,
				-170.5, -169.5, -168.5, -167.5, -166.5, -165.5, -164.5, -163.5, -162.5, -161.5, -160.5, -159.5, -158.5,
				-157.5, -156.5, -155.5, -154.5, -153.5, -152.5, -151.5, -150.5, -149.5, -148.5, -147.5, -146.5, -145.5,
				-144.5, -143.5, -142.5, -141.5, -140.5, -139.5, -138.5, -137.5, -136.5, -135.5, -134.5, -133.5, -132.5,
				-131.5, -130.5, -129.5, -128.5, -127.5, -126.5, -125.5, -124.5, -123.5, -122.5, -121.5, -120.5, -119.5,
				-118.5, -117.5, -116.5, -115.5, -114.5, -113.5, -112.5, -111.5, -110.5, -109.5, -108.5, -107.5, -106.5,
				-105.5, -104.5, -103.5, -102.5, -101.5, -100.5, -99.5, -98.5, -97.5, -96.5, -95.5, -94.5, -93.5, -92.5,
				-91.5, -90.5, -89.5, -88.5, -87.5, -86.5, -85.5, -84.5, -83.5, -82.5, -81.5, -80.5, -79.5, -78.5,
				-77.5, -76.5, -75.5, -74.5, -73.5, -72.5, -71.5, -70.5, -69.5, -68.5, -67.5, -66.5, -65.5, -64.5,
				-63.5, -62.5, -61.5, -60.5, -59.5, -58.5, -57.5, -56.5, -55.5, -54.5, -53.5, -52.5, -51.5, -50.5,
				-49.5, -48.5, -47.5, -46.5, -45.5, -44.5, -43.5, -42.5, -41.5, -40.5, -39.5, -38.5, -37.5, -36.5,
				-35.5, -34.5, -33.5, -32.5, -31.5, -30.5, -29.5, -28.5, -27.5, -26.5, -25.5, -24.5, -23.5, -22.5,
				-21.5, -20.5, -19.5, -18.5, -17.5, -16.5, -15.5, -14.5, -13.5, -12.5, -11.5, -10.5, -9.5, -8.5, -7.5,
				-6.5, -5.5, -4.5, -3.5, -2.5, -1.5, -0.5, 0.5, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5, 10.5, 11.5,
				12.5, 13.5, 14.5, 15.5, 16.5, 17.5, 18.5, 19.5, 20.5, 21.5, 22.5, 23.5, 24.5, 25.5, 26.5, 27.5, 28.5,
				29.5, 30.5, 31.5, 32.5, 33.5, 34.5, 35.5, 36.5, 37.5, 38.5, 39.5, 40.5, 41.5, 42.5, 43.5, 44.5, 45.5,
				46.5, 47.5, 48.5, 49.5, 50.5, 51.5, 52.5, 53.5, 54.5, 55.5, 56.5, 57.5, 58.5, 59.5, 60.5, 61.5, 62.5,
				63.5, 64.5, 65.5, 66.5, 67.5, 68.5, 69.5, 70.5, 71.5, 72.5, 73.5, 74.5, 75.5, 76.5, 77.5, 78.5, 79.5,
				80.5, 81.5, 82.5, 83.5, 84.5, 85.5, 86.5, 87.5, 88.5, 89.5, 90.5, 91.5, 92.5, 93.5, 94.5, 95.5, 96.5,
				97.5, 98.5, 99.5, 100.5, 101.5, 102.5, 103.5, 104.5, 105.5, 106.5, 107.5, 108.5, 109.5, 110.5, 111.5,
				112.5, 113.5, 114.5, 115.5, 116.5, 117.5, 118.5, 119.5, 120.5, 121.5, 122.5, 123.5, 124.5, 125.5,
				126.5, 127.5, 128.5, 129.5, 130.5, 131.5, 132.5, 133.5, 134.5, 135.5, 136.5, 137.5, 138.5, 139.5,
				140.5, 141.5, 142.5, 143.5, 144.5, 145.5, 146.5, 147.5, 148.5, 149.5, 150.5, 151.5, 152.5, 153.5,
				154.5, 155.5, 156.5, 157.5, 158.5, 159.5, 160.5, 161.5, 162.5, 163.5, 164.5, 165.5, 166.5, 167.5,
				168.5, 169.5, 170.5, 171.5, 172.5, 173.5, 174.5, 175.5, 176.5, 177.5, 178.5, 179.5 ];
		data[portletNameSpace + 'allDepth'] = [ 6 ];
		data[portletNameSpace + 'latArray'] = [ 50.50, 49.50, 49.50, 49.50, 49.50, 49.50, 49.50, 49.50, 49.50, 48.50,
				48.50, 48.50, 48.50, 48.50, 48.50, 48.50, 48.50, 48.50, 48.50, 48.50, 47.50, 47.50, 47.50, 47.50,
				47.50, 47.50, 47.50, 47.50, 47.50, 47.50, 47.50, 46.50, 46.50, 46.50, 45.50, 45.50, 44.50, 44.50,
				43.50, 43.50, 42.50, 42.50, 42.50, 41.50, 40.50, 40.50, 39.50, 39.50, 39.50, 38.50, 38.50, 37.50,
				37.50, 37.50, 36.50, 36.50, 36.50, 35.50, 35.50, 34.50, 34.50, 33.50, 33.50, 33.50, 33.50, 33.50,
				32.50, 32.50, 32.50, 32.50, 32.50, 32.50, 31.50, 31.50, 31.50, 30.50, 29.50, 29.50, 29.50, 28.50,
				28.50, 27.50, 27.50, 27.50, 26.50, 26.50, 25.50, 25.50, 24.50, 24.50, 24.50, 23.50, 23.50, 23.50,
				22.50, 22.50, 21.50, 21.50, 21.50, 20.50, 20.50, 19.50, 19.50, 18.50, 18.50, 17.50, 17.50, 16.50,
				15.50, 15.50, 14.50, 13.50, 13.50, 13.50, 12.50, 12.50, 12.50, 11.50, 11.50, 10.50, 10.50, 9.50, 9.50,
				9.50, 8.50, 8.50, 8.50, 8.50, 7.50, 7.50, 6.50, 6.50, 6.50, 5.50, 5.50, 5.50, 4.50, 4.50, 4.50, 3.50,
				2.50, 2.50, 2.50, 1.50, 1.50, 0.50, 0.50, -0.50, -0.50, -1.50, -1.50, -2.50, -2.50, -2.50, -3.50,
				-3.50, -4.50, -4.50, -4.50, -5.50, -5.50, -5.50, -6.50, -6.50, -7.50, -7.50, -7.50, -8.50, -9.50,
				-9.50, -10.50, -10.50, -11.50, -11.50, -11.50, -12.50, -12.50, -13.50, -13.50, -14.50, -14.50, -15.50,
				-15.50, -15.50, -16.50, -16.50, -17.50, -18.50, -18.50, -18.50, -19.50, -19.50, -19.50, -20.50, -20.50,
				-21.50, -21.50, -22.50, -22.50, -23.50, -23.50, -23.50, -24.50, -24.50, -24.50, -24.50, -25.50, -25.50,
				-25.50, -26.50, -26.50, -26.50, -27.50, -27.50, -27.50, -28.50, -28.50, -28.50, -29.50, -29.50, -29.50,
				-30.50, -30.50, -30.50, -30.50, -31.50, -31.50, -31.50, -31.50, -32.50, -32.50, -32.50, -32.50, -33.50,
				-33.50, -33.50, -33.50, -33.50, -33.50, -33.50, -34.50, -34.50, -34.50, -34.50, -34.50, -34.50, -35.50,
				-36.50, -36.50, -37.50, -37.50, -38.50, -38.50, -39.50, -39.50, -40.50, -40.50, -41.50, -41.50, -42.50,
				-42.50, -42.50, -43.50, -43.50, -44.50, -44.50, -45.50, -46.50, -46.50, -46.50, -47.50, -47.50, -48.50,
				-48.50, -49.50, -50.50, -50.50, -51.50, -51.50 ];
		data[portletNameSpace + 'lonArray'] = [ -3.50, -4.50, -4.50, -5.50, -6.50, -6.50, -7.50, -7.50, -8.50, -9.50,
				-9.50, -9.50, -10.50, -11.50, -11.50, -12.50, -12.50, -13.50, -13.50, -14.50, -14.50, -15.50, -15.50,
				-16.50, -16.50, -17.50, -17.50, -18.50, -18.50, -19.50, -19.50, -19.50, -19.50, -20.50, -20.50, -20.50,
				-20.50, -19.50, -20.50, -19.50, -19.50, -20.50, -20.50, -19.50, -20.50, -19.50, -20.50, -20.50, -19.50,
				-19.50, -19.50, -19.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50,
				-20.50, -20.50, -20.50, -19.50, -18.50, -18.50, -17.50, -17.50, -16.50, -17.50, -17.50, -17.50, -18.50,
				-18.50, -19.50, -19.50, -20.50, -20.50, -20.50, -21.50, -21.50, -21.50, -21.50, -21.50, -21.50, -21.50,
				-21.50, -21.50, -21.50, -21.50, -21.50, -21.50, -21.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50,
				-20.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50, -20.50,
				-20.50, -20.50, -20.50, -21.50, -21.50, -21.50, -21.50, -21.50, -22.50, -22.50, -22.50, -22.50, -22.50,
				-22.50, -23.50, -23.50, -23.50, -23.50, -23.50, -23.50, -23.50, -24.50, -24.50, -24.50, -24.50, -24.50,
				-25.50, -25.50, -25.50, -25.50, -25.50, -25.50, -26.50, -26.50, -26.50, -26.50, -26.50, -27.50, -27.50,
				-27.50, -27.50, -27.50, -28.50, -28.50, -28.50, -28.50, -28.50, -28.50, -29.50, -29.50, -29.50, -29.50,
				-29.50, -30.50, -30.50, -30.50, -30.50, -31.50, -31.50, -31.50, -31.50, -32.50, -32.50, -32.50, -32.50,
				-32.50, -33.50, -33.50, -33.50, -33.50, -33.50, -33.50, -34.50, -34.50, -34.50, -35.50, -35.50, -35.50,
				-35.50, -35.50, -35.50, -36.50, -36.50, -36.50, -36.50, -37.50, -37.50, -37.50, -37.50, -37.50, -37.50,
				-37.50, -38.50, -38.50, -38.50, -39.50, -39.50, -39.50, -40.50, -40.50, -40.50, -41.50, -41.50, -41.50,
				-42.50, -42.50, -42.50, -43.50, -43.50, -43.50, -43.50, -44.50, -44.50, -44.50, -45.50, -45.50, -45.50,
				-45.50, -46.50, -46.50, -46.50, -46.50, -47.50, -48.50, -48.50, -49.50, -49.50, -50.50, -51.50, -51.50,
				-52.50, -54.50, -55.50, -55.50, -55.50, -55.50, -55.50, -55.50, -55.50, -55.50, -55.50, -55.50, -55.50,
				-55.50, -55.50, -55.50, -55.50, -55.50, -55.50, -55.50, -55.50, -56.50, -56.50, -56.50, -56.50, -56.50,
				-56.50, -56.50, -56.50, -56.50, -57.50, -57.50, -57.50, -57.50, -57.50 ];
		data[portletNameSpace + 'timeArray'] = [ 42985020, 42985140, 42985260, 42985380, 42985509, 42985636, 42985739,
				42985890, 42985985, 42986230, 42986330, 42986409, 42986569, 42986750, 42986819, 42986940, 42987070,
				42987220, 42987310, 42987423, 42987647, 42987778, 42987856, 42988035, 42988155, 42988266, 42988395,
				42988519, 42988640, 42988838, 42989000, 42989105, 42989220, 42989350, 42989470, 42989640, 42989770,
				42989880, 42990000, 42990252, 42990360, 42990570, 42990690, 42990805, 42991025, 42991205, 42991320,
				42991440, 42991555, 42991720, 42991830, 42992010, 42992130, 42992250, 42992370, 42992565, 42992634,
				42992768, 42992877, 42992975, 42993150, 42993280, 42993450, 42993555, 42993660, 42993820, 42994065,
				42994217, 42994321, 42994460, 42994590, 42994710, 42994860, 42994980, 42995100, 42995340, 42995520,
				42995644, 42995760, 42995885, 42996030, 42996160, 42996410, 42996510, 42996690, 42996810, 42996960,
				42997092, 42997202, 42997322, 42997440, 42997500, 42997590, 42997755, 42997980, 42998130, 42998250,
				42998390, 42998519, 42998648, 42998765, 42998885, 42999005, 42999360, 42999480, 42999600, 42999720,
				42999840, 43000080, 43000260, 43000455, 43000590, 43000620, 43000830, 43000980, 43001110, 43001220,
				43001335, 43001460, 43001590, 43001700, 43001850, 43001947, 43002150, 43002330, 43002420, 43002470,
				43002590, 43002810, 43002902, 43003016, 43003140, 43003290, 43003542, 43003607, 43003727, 43003855,
				43003959, 43004100, 43004335, 43004460, 43004580, 43004730, 43004854, 43005030, 43005210, 43005480,
				43005664, 43005785, 43005897, 43006020, 43006155, 43006248, 43006470, 43006590, 43006850, 43006940,
				43007040, 43007158, 43007238, 43007339, 43007430, 43007636, 43007719, 43007910, 43008030, 43008180,
				43008450, 43008670, 43008840, 43008954, 43009110, 43009257, 43009425, 43009605, 43009814, 43009912,
				43010037, 43010230, 43010343, 43010532, 43010625, 43010865, 43010975, 43011133, 43011270, 43011601,
				43011725, 43011842, 43011990, 43012116, 43012290, 43012410, 43012590, 43012710, 43012920, 43013040,
				43013160, 43013280, 43013418, 43013547, 43013730, 43013880, 43014002, 43014084, 43014144, 43014367,
				43014480, 43014600, 43014720, 43014840, 43015010, 43015170, 43015290, 43015454, 43015622, 43015800,
				43015920, 43016040, 43016160, 43016280, 43016462, 43016610, 43016720, 43016760, 43016970, 43017149,
				43017238, 43017359, 43017480, 43017600, 43017735, 43017860, 43018050, 43018170, 43018290, 43018530,
				43018676, 43018797, 43018977, 43019108, 43019253, 43019384, 43019470, 43019623, 43020076, 43024030,
				43024140, 43024260, 43024440, 43024500, 43024620, 43024744, 43024862, 43024995, 43025173, 43025370,
				43025490, 43025578, 43025690, 43025820, 43025940, 43026060, 43026160, 43026323, 43026440, 43026524,
				43026750, 43026870, 43026990, 43027135, 43027264, 43027377, 43027510, 43027729, 43027872, 43028065,
				43028185, 43028305 ];
		data[portletNameSpace + 'vals'] = 'chl';
		data[portletNameSpace + 'chl'] = [ 10.36, 1.81, 0.58, 2.29, 0.51, 3.06, 0.69, 0.65, 0.55, 0.64, 0.39, 0.3,
				0.81, 0.23, 0.52, 0.02, 0.38, 0.47, 0.49, 0.5, 0.47, 0.29, 0.47, 0.45, 0.27, 0.32, 0.38, 0.48, 0.35,
				0.23, 0.2, 0.2, 0.18, 0.16, 0.18, 0.16, 0.05, 0.07, 0.05, 0.11, 0.11, 0.13, 0.12, 0.08, 0.12, 0.09,
				0.08, 0.1, 0.07, 0.12, 0.13, 0.09, 0.11, 0.07, 0.02, 0.13, 0.09, 0.09, 0.07, 0.1, 0.05, 0.1, 0.07,
				0.06, 0.07, 0.09, 0.06, 0.03, 0.04, 0.05, 0.11, 0.09, 0.1, 0.11, 0.09, 0.08, 0.1, 0.1, 0.1, 0.1, 0.09,
				0.11, 0.1, 0.1, 0.08, 0.09, 0.11, 0.11, 0.1, 0.1, 0.13, 0.12, 0.17, 0.05, 0.16, 0.68, 0.34, 0.35, 0.35,
				0.29, 0.16, 0.35, 0.81, 0.12, 0.17, 0.12, 0.15, 0.12, 0.24, 0.3, 0.24, 0.22, 0.17, 0.13, 0.18, 0.17,
				0.14, 0.16, 0.07, 0.09, 0.09, 0.24, 0.13, 0.17, 0.12, 0.14, 0.14, 0.12, 0.15, 0.16, 0.11, 0.05, 0.17,
				0.18, 0.17, 0.21, 0.15, 0.16, 0.13, 0.16, 0.14, 0.1, 0.26, 0.18, 0.2, 0.16, 0.13, 0.31, 0.22, 0.19,
				0.11, 0.12, 0.18, 0.11, 0.11, 0.13, 0.13, 0.14, 0.14, 0.09, 0.05, 0.16, 0.15, 0.13, 0.11, 0.13, 0.34,
				0.09, 0.02, 0.07, 0.1, 0.08, 0.11, 0.07, 0.06, 0.06, 0.04, 0.25, 0.25, 0.04, 0.04, 0.02, 0.09, 0.05,
				0.06, 0.05, 0.05, 0.07, 0.08, 0.06, 0.09, 0.08, 0.1, 0.13, 0.18, 0.12, 0.14, 0.05, 0.15, 0.11, 0.12,
				0.12, 0.08, 0.13, 0.16, 0.11, 0.2, 0.11, 0.28, 0.14, 0.26, 0.23, 0.22, 0.21, 0.27, 0.2, 0.18, 0.07,
				0.49, 0.19, 0.19, 0.2, 1.72, 0.17, 0.23, 0.28, 0.36, 0.11, 0.19, 0.23, 0.33, 0.15, 1.62, 0.86, 0.93,
				0.73, 0.66, 0.3, 0.32, 0.48, 0.31, 0.85, 0.69, 0.94, 0.91, 2.84, 0.27, 0.4, 0.47, 0.95, 1.26, 1.41,
				2.01, 3.49, 2.32, 0.66, 0.37, 0.33, 0.23, 0.16, 0.39, 0.38, 0.2, 0.59, 0.46, 0.34, 1.12, 0.53, 0.31,
				0.04, 0.3, 0.34, 0.56, 0.29, 3.5, 1.01, 5.56, 1.06, 1.29 ];
		data[portletNameSpace + 'chlDescription'] = [ "Chl", "Chlorphyll-a", "mg m-3" ];

		AUI().use('aui-io-request', function(A) {
			// data to be sent to server

			A.io.request(url, {
				data : data,
				dataType : 'json',

				on : {
					failure : function() {
						alert("SOMETHING WENT WRONG!");
					},

					success : function(event, id, obj) {
						console.log("Great success!");
					}
				}

			});
		});
	}
	// public interface
	return {
		getLonghurstPolygon : getLonghurstPolygon,
		getDimension : getDimension,
		getLayersFromNetCDFFile : getLayersFromNetCDFFile,
		getDatavaluesFromRaster : getDatavaluesFromRaster,
		createNetCDF : createNetCDF,
	};

}(jQuery));
